<!DOCTYPE html>
<html lang="es">
<head>
    <script>
    // Una l铆nea de c贸digo para detectar m贸vil y redirigir
    if (/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        window.location.replace('https://jaircruz1304.github.io/FIAS/Map.html');
    }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo de reas Protegidas del Ecuador - FIAS</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --primary-color: #2c5e1a;
            --secondary-color: #4a8c2c;
            --fias-color: #0d6efd;
            --light-bg: #f8f9fa;
            --admin-color: #6f42c1;
            --rem-color: #20c997;
            --fap-color: #fd7e14;
            --bio-color: #e83e8c;
            --pasf-color: #ffc107;
            --conserva-color: #17a2b8;
            --feig-color: #6610f2;
        }

        body {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            background-color: var(--light-bg);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 0.8rem 1rem;
        }

        .navbar-brand {
            font-weight: 700;
        }

        #map-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        #sidebar {
            width: 400px;
            background: linear-gradient(to bottom, #ffffff, #f8f9fa);
            display: flex;
            flex-direction: column;
            box-shadow: 3px 0 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            z-index: 1001;
            border-right: 1px solid #eaeaea;
        }
        
        #sidebar.collapsed {
            transform: translateX(-400px);
        }

        .sidebar-header {
            padding: 1.2rem;
            border-bottom: 1px solid #e0e0e0;
            background-color: white;
        }
        
        #search-input {
            border-radius: 50px;
            padding: 0.6rem 1.2rem;
            border: 1px solid #ced4da;
            transition: all 0.3s;
        }

        #search-input:focus {
            box-shadow: 0 0 0 0.25rem rgba(44, 94, 26, 0.25);
            border-color: var(--primary-color);
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }

        /* --- Estilos de Filtros --- */
        .filter-section {
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin: 0.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .filter-group {
            margin-bottom: 1rem;
        }

        .filter-group:last-child {
            margin-bottom: 0;
        }

        .filter-group h6 {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .filter-group h6 .badge {
            font-size: 0.7rem;
        }

        .filter-options {
            max-height: 200px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .filter-option:hover {
            background-color: #f8f9fa;
        }

        .filter-option input {
            margin-right: 0.6rem;
            cursor: pointer;
        }

        .filter-option label {
            flex: 1;
            margin-bottom: 0;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .filter-option .logo-container {
            display: flex;
            align-items: center;
            gap: 10px; 
        }

        .filter-option img {
            width: 40px; 
            height: 40px; 
            object-fit: contain; 
            border-radius: 50%;
            background-color: #fff;
            border: 1px solid #ddd;
        }
        
        .filter-option .count {
            font-size: 0.8rem;
            color: #6c757d;
            background-color: #f8f9fa;
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
        }

        .filter-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .filter-actions button {
            flex: 1;
            padding: 0.3rem 0.5rem;
            font-size: 0.8rem;
        }

        /* --- Estilos de Tarjetas (Cards) --- */
        .area-card {
            border: 1px solid rgba(0,0,0,.125);
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            background-color: white;
            overflow: hidden;
        }

        .area-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .area-card.active {
            border-left: 5px solid var(--primary-color);
            box-shadow: 0 5px 15px rgba(44, 94, 26, 0.2);
            background-color: #fcfdfc;
        }

        .admin-card.active {
            border-left: 5px solid var(--admin-color);
        }

        .admin-card {
            border-left: 5px solid var(--admin-color);
        }

        .area-card-header {
            padding: 0.9rem 1.2rem;
            background: linear-gradient(to right, rgba(0,0,0,.02), rgba(0,0,0,.05));
            border-bottom: 1px solid rgba(0,0,0,.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Nuevo estilo para la imagen en la tarjeta lateral */
        .area-card-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 0.7rem;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            background-color: #f8f9fa;
        }

        .area-card-body {
            padding: 1.2rem;
        }

        .fias-badge {
            background: linear-gradient(135deg, var(--fias-color) 0%, #0a58ca 100%);
            box-shadow: 0 2px 5px rgba(13, 110, 253, 0.3);
        }

        .admin-badge {
            background: linear-gradient(135deg, var(--admin-color) 0%, #5a32a3 100%);
            color: white;
        }

        .stats-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.2rem;
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            border-top: 1px solid #e9ecef;
        }

        #map-wrapper {
            flex: 1;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }

        #toggle-sidebar-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1002;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        #toggle-sidebar-btn:hover {
            transform: scale(1.1);
        }
        
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .leaflet-popup-content {
            margin: 15px;
            line-height: 1.5;
        }

        .leaflet-popup-content h5 {
            color: var(--primary-color);
            margin-bottom: 0.7rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(13, 110, 253, 0); }
            100% { box-shadow: 0 0 0 0 rgba(13, 110, 253, 0); }
        }

        /* --- Estilos para los Marcadores en el Mapa --- */
        .custom-map-img {
            width: 40px !important;
            height: 40px !important;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 3px 6px rgba(0,0,0,0.4);
            object-fit: cover;
            background-color: white;
            transition: transform 0.2s;
        }

        .custom-map-img:hover {
            transform: scale(1.2);
            z-index: 1000 !important;
            border-color: var(--primary-color);
        }

        .fias-marker-pulse {
            border-radius: 50%;
            animation: pulse 2s infinite;
            border: 2px solid var(--fias-color) !important;
        }
        
        #loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            backdrop-filter: blur(5px);
        }

        .loading-text {
            margin-top: 20px;
            font-weight: 500;
            color: var(--primary-color);
        }

        .legend {
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.4);
            line-height: 1.5;
        }

        .legend h4 {
            margin: 0 0 10px;
            font-size: 1rem;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
            border-radius: 50%;
        }

        .legend span {
            font-size: 0.9rem;
            line-height: 18px;
        }

        .custom-btn {
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .custom-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .fiass-color { color: var(--fias-color); }
        .rem-color { color: var(--rem-color); }
        .fap-color { color: var(--fap-color); }
        .bio-color { color: var(--bio-color); }
        .pasf-color { color: var(--pasf-color); }
        .conserva-color { color: var(--conserva-color); }
        .feig-color { color: var(--feig-color); }

        .sidebar-content::-webkit-scrollbar,
        .filter-options::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar-content::-webkit-scrollbar-track,
        .filter-options::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .sidebar-content::-webkit-scrollbar-thumb,
        .filter-options::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        .sidebar-content::-webkit-scrollbar-thumb:hover,
        .filter-options::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
               <img src="https://fias.org.ec/wp-content/uploads/2021/11/Logo_FIAS_web.png" height="30" width="150" alt="Logo de FIAS" loading="lazy">                
               <span class="fs-4 fw-bold ms-3 d-none d-md-block">MAPA INTERACTIVO DE BIENES INSTITUCIONALES</span>
            </a>
            <div class="d-flex align-items-center ms-auto">
                <button class="btn btn-sm btn-outline-light me-2 custom-btn" data-bs-toggle="tooltip" title="Reiniciar todos los filtros" id="reset-filters">
                    <i class="fas fa-filter-circle-xmark me-1"></i> Reiniciar
                </button>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="fias-filter">
                    <label class="form-check-label text-white small ms-1" for="fias-filter">
                        <i class="fas fa-gem me-1"></i> Solo FIAS
                    </label>
                </div>
            </div>
        </div>
    </nav>

    <div id="map-container">
        <div id="sidebar">
            <div class="sidebar-header">
                <input type="text" id="search-input" class="form-control" placeholder=" Buscar por nombre...">
            </div>
            
            <div class="sidebar-content">
                
                <div class="filter-section" id="region-panel">
                    <div class="filter-group">
                        <h6>
                            <span><i class="fas fa-globe-americas me-2"></i>Regiones</span>
                            <span class="badge bg-primary" id="selected-regions-count">0</span>
                        </h6>
                        <div class="filter-options" id="region-options"></div>
                        <div class="filter-actions">
                            <button class="btn btn-sm btn-outline-primary" id="select-all-regions">Seleccionar todos</button>
                            <button class="btn btn-sm btn-outline-secondary" id="clear-all-regions">Limpiar</button>
                        </div>
                    </div>
                </div>

                <div class="filter-section" id="type-panel">
                    <div class="filter-group">
                        <h6>
                            <span><i class="fas fa-tag me-2"></i>Tipos de reas</span>
                            <span class="badge bg-primary" id="selected-types-count">0</span>
                        </h6>
                        <div class="filter-options" id="type-options"></div>
                        <div class="filter-actions">
                            <button class="btn btn-sm btn-outline-primary" id="select-all-types">Seleccionar todos</button>
                            <button class="btn btn-sm btn-outline-secondary" id="clear-all-types">Limpiar</button>
                        </div>
                    </div>
                </div>

                <div class="filter-section" id="admin-panel">
                    <div class="filter-group">
                        <h6>
                            <span><i class="fas fa-building me-2"></i>reas Administrativas</span>
                            <span class="badge bg-primary" id="selected-admin-count">0</span>
                        </h6>
                        <div class="filter-options" id="admin-options"></div>
                        <div class="filter-actions">
                            <button class="btn btn-sm btn-outline-primary" id="select-all-admin">Seleccionar todos</button>
                            <button class="btn btn-sm btn-outline-secondary" id="clear-all-admin">Limpiar</button>
                        </div>
                    </div>
                </div>
                
                <hr>

                <div class="p-2">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="text-success mb-0"><i class="fas fa-list me-1"></i> reas Encontradas</h6>
                        <span class="badge bg-secondary rounded-pill" id="areas-count">0/0</span>
                    </div>
                    <div id="areas-cards"></div>
                </div>
            </div>
            
            <div class="stats-container">
    <small class="text-muted">
        Mostrando <strong id="visible-count">0</strong> de <strong id="total-count">0</strong> 谩reas
    </small>
    <button class="btn btn-sm btn-outline-secondary rounded-circle" id="scroll-to-top" data-bs-toggle="tooltip" title="Volver al inicio">
        <i class="fas fa-arrow-up"></i>
    </button>
</div>


        </div>
        <div id="map-wrapper">
            <div id="loading-overlay">
                <div class="spinner-border text-success" role="status" style="width: 3rem; height: 3rem;">
                    <span class="visually-hidden">Cargando mapa...</span>
                </div>
                <span class="loading-text mt-3">Cargando mapa...</span>
            </div>
           <button id="toggle-sidebar-btn" class="btn btn-light shadow-sm"><i class="fas fa-bars"></i></button>
           <div id="map"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            
            // 1. CONFIGURACIN DE IMGENES GITHUB
            // Apuntamos al contenido "raw" para que las im谩genes se sirvan como archivos
            const repoBaseUrl = "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/";
            // Imagen por defecto (Logo FIAS) si no se encuentra la espec铆fica
            const defaultImage = "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"; 

            // Funci贸n auxiliar para convertir nombre a nombre de archivo
            // Ej: "Parque Nacional Yasun铆" -> "Parque_Nacional_Yasuni.png"
           // function generarUrlImagen(nombre) {
             //   const nombreLimpio = nombre.normalize("NFD").replace(/[\u0300-\u036f]/g, "") // Quitar tildes
               //                            .replace(/\./g, "") // Quitar puntos
                 //                          .replace(/\s+/g, "_"); // Espacios a guiones bajos
                
                // Aseg煤rate de que tus archivos en GitHub sean .png (o cambia a .jpg si es necesario)
                //return `${repoBaseUrl}${nombreLimpio}.png`;
            //}

            const areasProtegidas = [
    {id: 1, nombre: "Parque Nacional Yasun铆", tipo: "Parque Nacional", region: "Amazon铆a", latitud: -1.5261, longitud: -76.4559, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jguerrero_fias_org_ec/Ebzbg-n4aIJGihvdlnKFzgYBNS2jKALNXbE5IE5RLRS9pw?e=2veUI4", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Yasun%C3%AD.png"},
    {id: 2, nombre: "Reserva Ecol贸gica Cotacachi-Cayapas", tipo: "Reserva Ecol贸gica", region: "Sierra", latitud: 0.681, longitud: -78.594, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/npaspuel_fias_org_ec/Eab6X42Aj9ZKrLLx4qpSg5ABacHpcPsTeKsaYRcHuZ6dFg?e=0FKWWT", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Cotacachi-Cayapas.png"},
    {id: 3, nombre: "Parque Nacional Gal谩pagos", tipo: "Parque Nacional", region: "Insular", latitud: -0.9538, longitud: -90.9656, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/refs/heads/Img_Map/Parque%20nacional%20Galapagos.png"},
    {id: 4, nombre: "Parque Nacional Machalilla", tipo: "Parque Nacional", region: "Costa", latitud: -1.5427, longitud: -80.7512, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/dascencio_fias_org_ec/EecEtd5uu6JGojx4VeqCvekB1p5h2fjxWgU7e1a8GZQc0w?e=4ESyOd", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Machalilla.png"},
    {id: 5, nombre: "Reserva de Producci贸n Faun铆stica Cuyabeno", tipo: "Reserva de Producci贸n de Fauna", region: "Amazon铆a", latitud: -0.1807, longitud: -76.1507, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/ntacure_fias_org_ec/EfA1Iy38mT1DmiT0wzce0UABLeW-JczYfZ0AknaV2-Nzeg?e=yCqE7d", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20de%20Producci%C3%B3n%20Faun%C3%ADstica%20Cuyabeno.png"},
    {id: 6, nombre: "Parque Nacional Sangay", tipo: "Parque Nacional", region: "Sierra", latitud: -1.837, longitud: -78.3864, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mmurillo_fias_org_ec/EUA1Mbpds0pCqv6QEmjpmRkBHFzxGU20o9WAE4tDKoiJOg", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Sangay.png"},
    {id: 7, nombre: "Parque Nacional Cajas", tipo: "Parque Nacional", region: "Sierra", latitud: -2.8487368, longitud: -79.2537609, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Cajas.png"},
    {id: 8, nombre: "Reserva Ecol贸gica El ngel", tipo: "Reserva Ecol贸gica", region: "Sierra", latitud: 0.7551564, longitud: -77.9053182, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mcuaspud_fias_org_ec/EVzkgKlLIMJAt9HzA8dgURMBYpEu58j70EtB2dALyAL2Kg?e=4SDhTf", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20El%20%C3%81ngel.png"},
    {id: 9, nombre: "Reserva Ecol贸gica Mache-Chindul", tipo: "Reserva Ecol贸gica", region: "Costa", latitud: 0.4802566, longitud: -79.7848422, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/bleverone_fias_org_ec/EToEcGwLmQhJiP2_sqJqkoEBgY9c0vTMWSIL6NwQPqm49g?e=cbdWBR", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Mache-Chindul.png"},
    {id: 10, nombre: "Reserva Ecol贸gica Manglares Cayapas Mataje", tipo: "Reserva Ecol贸gica", region: "Costa", latitud: 1.2839279, longitud: -78.9061921, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jbetancourt_fias_org_ec/EceA_pgdGLhPkDgM-xg--wUB_lhvcQKh4kTeWE_x5EgHjw?e=JP8Ha7", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Manglares%20Cayapas%20Mataje.png"},
    {id: 11, nombre: "Refugio de Vida Silvestre La Chiquita", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: 1.2298436, longitud: -78.7647658, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jbetancourt_fias_org_ec/EQn7SGfJ86ZNuA63CICFgvAB0oJwmHqc-T6o3RIByi6P6A?e=Cx0vgk", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20La%20Chiquita.png"},
    {id: 12, nombre: "Reserva Marina Galera San Francisco", tipo: "Reserva Marina", region: "Costa", latitud: 0.7572725, longitud: -80.0946498, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/cmorante_fias_org_ec/ESCTnLNzBftFlrJmROXhT_oBFoV_wdXJZ1AxSPSTtjghVA?e=IwAtgT", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Marina%20Galera%20San%20Francisco.png"},
    {id: 13, nombre: "Refugio de Vida Silvestre Manglares Estuario R铆o Esmeraldas", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: 0.9775963, longitud: -79.645929, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/bleverone_fias_org_ec/EToEcGwLmQhJiP2_sqJqkoEBgY9c0vTMWSIL6NwQPqm49g?e=cbdWBR", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20Manglares%20Estuario%20R%C3%ADo%20Esmeraldas.png"},
    {id: 14, nombre: "Refugio de Vida Silvestre El Pambilar", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: 0.6089452, longitud: -79.1648003, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/bleverone_fias_org_ec/EToEcGwLmQhJiP2_sqJqkoEBgY9c0vTMWSIL6NwQPqm49g?e=cbdWBR", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20El%20Pambilar.png"},
    {id: 15, nombre: "Refugio de Vida Silvestre Isla Coraz贸n y Fragata", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: -0.6503938, longitud: -80.3712221, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/acedeno_fias_org_ec/ESE9REovGCdGvEcS9OnfkDYBkQJQLWqOGGTgP-ARJ-dMcQ?e=jwqpAe", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20Isla%20Coraz%C3%B3n%20y%20Fragata.png"},
    {id: 16, nombre: "Refugio de Vida Silvestre Marino Costera Pacoche", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: -1.0688227, longitud: -80.886806, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/acedeno_fias_org_ec/EaqAVoQubUJAg0wxUl49AHcBSzLi06OLcbqbiOv6MhN7Dg?e=UPcSAa", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20Marino%20Costera%20Pacoche.png"},
    {id: 17, nombre: "Reserva Marina El Pelado", tipo: "Reserva Marina", region: "Costa", latitud: -1.9432125, longitud: -80.7879407, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/eamores_fias_org_ec/ER5SMEbRoVdIukdpXPEbJIQBjCm3uDT_WzAcFo8U1269oA?e=scAlVq", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Marina%20El%20Pelado.png"},
    {id: 18, nombre: "Reserva Puntilla De Santa Elena", tipo: "Reserva de Producci贸n de Fauna", region: "Costa", latitud: -2.1887133, longitud: -81.0110023, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/grey_fias_org_ec/EcEVdK7PYutFiPpU94KoiboBTVpW9bsbF4GTH5U2IN_hUw?e=xhlBGd", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Puntilla%20De%20Santa%20Elena.png"},
    {id: 19, nombre: "rea Nacional De Recreaci贸n Playas Villamil", tipo: "rea Nacional de Recreaci贸n", region: "Costa", latitud: -2.6423745, longitud: -80.3886322, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/gguerrero_fias_org_ec/EdoJAEb7CW1IjZutfd21uX0BlzzwznaQJ_nI_hxlvIIPgQ?e=eERFh2", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/%C3%81rea%20Nacional%20De%20Recreaci%C3%B3n%20Playas%20Villamil.png"},
    {id: 20, nombre: "Parque Lago", tipo: "rea Nacional de Recreaci贸n", region: "Costa", latitud: -2.2242155, longitud: -80.0966835, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/ddecimavilla_fias_org_ec/Ee96bwS-z9hCrHIw058keJUByFNDTraJs3Xt5DVR4LaH0Q?e=T2LJii", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Lago.png"},
    {id: 21, nombre: "Reserva de Producci贸n de Fauna Manglares El Salado", tipo: "Reserva de Producci贸n de Fauna", region: "Costa", latitud: -2.2578119, longitud: -79.9484319, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/ddecimavilla_fias_org_ec/EZCymGqDTb1LvaeWfQ8UjgcBc1fSpMyoVrQrhS0jcJinDw?e=rdGNrj", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20de%20Producci%C3%B3n%20de%20Fauna%20Manglares%20El%20Salado.png"},
    {id: 22, nombre: "rea Nacional de Recreaci贸n Isla Santay", tipo: "rea Nacional de Recreaci贸n", region: "Costa", latitud: -2.2237935, longitud: -79.874174, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/gguerrero_fias_org_ec/EXiAyZR-OI1Dhf0Wm_xIL_QBAXQ-BchmA7ith5ZFKHh6Ug?e=tWgqE2", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/%C3%81rea%20Nacional%20de%20Recreaci%C3%B3n%20Isla%20Santay.png"},
    {id: 23, nombre: "Reserva Ecol贸gica Manglares Churute", tipo: "Reserva Ecol贸gica", region: "Costa", latitud: -2.4195775, longitud: -79.6246449, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/ddecimavilla_fias_org_ec/ET3IU7SwD6ZGj9IuDpT3xjABWh2CpACXfzVMAztJ97DZoA?e=EScNaM", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Manglares%20Churute.png"},
    {id: 24, nombre: "Refugio de Vida Silvestre Manglares el Morro", tipo: "Refugio de Vida Silvestre", region: "Costa", latitud: -2.6245454, longitud: -80.2450472, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/gguerrero_fias_org_ec/EeYVQVuBYJtHkW-gR9l_sn8BplcaqUgnz6XiDQcVd-IZug?e=Vqbdww", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20Manglares%20el%20Morro.png"},
    {id: 25, nombre: "Reserva Marina Isla Santa Clara", tipo: "Reserva Marina", region: "Costa", latitud: -3.1665538, longitud: -80.4333558, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Isla%20Santa%20Clara.png"}, // URL_AQUI corregida a logo default
    {id: 26, nombre: "Reserva Ecol贸gica de Arenillas", tipo: "Reserva Ecol贸gica", region: "Costa", latitud: -3.5665416, longitud: -80.1429895, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/grey_fias_org_ec/EcEVdK7PYutFiPpU94KoiboBTVpW9bsbF4GTH5U2IN_hUw?e=xhlBGd", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol贸gica%20de%20Arenillas.jpeg"}, // URL_AQUI corregida
    {id: 27, nombre: "Reserva Ecol贸gica Antisana", tipo: "Reserva Ecol贸gica", region: "Sierra", latitud: -0.5516115, longitud: -78.1564432, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Antisana.png"},
    {id: 28, nombre: "Parque Nacional Cayambe-Coca", tipo: "Parque Nacional", region: "Sierra", latitud: -0.0730003, longitud: -77.8367282, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/cjarrin_fias_org_ec/ETMZQJwANg9JtYBZyygtQkYBhTt_fuBK3ZxlUuzhBgbVwA?e=HsQEQa", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Cayambe-Coca.png"},
    {id: 29, nombre: "Refugio de Vida Silvestre Pasochoa", tipo: "Refugio de Vida Silvestre", region: "Sierra", latitud: -0.4596148, longitud: -78.4524591, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/cjarrin_fias_org_ec/ETMZQJwANg9JtYBZyygtQkYBhTt_fuBK3ZxlUuzhBgbVwA?e=HsQEQa", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20Pasochoa.png"},
    {id: 30, nombre: "Reserva Ecol贸gica Los Illinizas", tipo: "Reserva Ecol贸gica", region: "Sierra", latitud: -0.7022491, longitud: -79.0645695, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mzambrano_fias_org_ec/EQ_ZXb1kJUFAoZOBbdhcpnYBAPid0lC6_bffwcNjBuysew?e=rBhhbA2", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Los%20Illinizas.png"},
    {id: 31, nombre: "Parque Nacional Cotopaxi", tipo: "Parque Nacional", region: "Sierra", latitud: -0.7007416, longitud: -78.4297187, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mzambrano_fias_org_ec/EebujJKUXVNIgZ9zGkSTpCwBLT7VsXvHTSPX0qWfotZGmA?e=vF2FcZ", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Cotopaxi.png"},
    {id: 32, nombre: "Area Nacional de Recreaci贸n El Boliche", tipo: "rea Nacional de Recreaci贸n", region: "Sierra", latitud: -0.794213, longitud: -78.5433701, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mzambrano_fias_org_ec/ESPXmFoTwmJCnKgk5IdmXiQBsSpZ104j2UZdtyCH3mUsJA?e=nbqIJv", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Area%20Nacional%20de%20Recreaci%C3%B3n%20El%20Boliche.png"},
    {id: 33, nombre: "Reserva Biol贸gica Colonso Chalupas", tipo: "Reserva Biol贸gica", region: "Amazon铆a", latitud: -0.9889268, longitud: -77.9078127, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jortiz_fias_org_ec/EeT-M6Q2zK5JnYxeN-JnrBQBq3YaIJJroHMBS147ocABow?e=Tz9rGT", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Biol%C3%B3gica%20Colonso%20Chalupas.png"},
    {id: 34, nombre: "Parque Nacional Llanganates", tipo: "Parque Nacional", region: "Sierra", latitud: -1.1491018, longitud: -78.2476146, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jortiz_fias_org_ec/EeT-M6Q2zK5JnYxeN-JnrBQBq3YaIJJroHMBS147ocABow?e=Tz9rGT", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Llanganates.png"},
    {id: 35, nombre: "Reserva de Producci贸n de Fauna Chimborazo", tipo: "Reserva de Producci贸n de Fauna", region: "Sierra", latitud: -1.4693018, longitud: -78.8169396, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/mmurillo_fias_org_ec/EUA1Mbpds0pCqv6QEmjpmRkBHFzxGU20o9WAE4tDKoiJOg", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20de%20Producci%C3%B3n%20de%20Fauna%20Chimborazo.png"},
    {id: 36, nombre: "rea Nacional de Recreaci贸n Quimsacocha", tipo: "rea Nacional de Recreaci贸n", region: "Sierra", latitud: -2.9942882, longitud: -79.2366048, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/%C3%81rea%20Nacional%20de%20Recreaci%C3%B3n%20Quimsacocha.png"},
    {id: 37, nombre: "Parque Nacional Podocarpus", tipo: "Parque Nacional", region: "Sierra", latitud: -4.1260477, longitud: -78.9950463, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/rjaramillo_fias_org_ec/EaFFYJKDHypPmYWaUWDZHhsBHzFNgIHWsBkEFTZyr2k2mA?e=AyrYMV", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Podocarpus.png"},
    {id: 38, nombre: "Parque Nacional de Yacuri", tipo: "Parque Nacional", region: "Sierra", latitud: -4.6257708, longitud: -79.3127543, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/rjaramillo_fias_org_ec/EQokc_H-3b5Bo9OwxJoniqQBuJcg10XDoZFDJ_r7gOBLmw?e=fausAE", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20de%20Yacuri.png"},
    {id: 39, nombre: "Reserva Ecol贸gica Cof谩n-Bermejo", tipo: "Reserva Ecol贸gica", region: "Amazon铆a", latitud: 0.3640394, longitud: -77.4126177, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Ecol%C3%B3gica%20Cof%C3%A1n-Bermejo.png"},
    {id: 40, nombre: "Parque Nacional Sumaco Napo-Galeras", tipo: "Parque Nacional", region: "Amazon铆a", latitud: -0.3659083, longitud: -77.4701972, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Parque%20Nacional%20Sumaco%20Napo-Galeras.png"},
    {id: 41, nombre: "Reserva Biol贸gica Limoncocha", tipo: "Reserva Biol贸gica", region: "Amazon铆a", latitud: -0.3967244, longitud: -76.6123884, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jguerrero_fias_org_ec/Ebzbg-n4aIJGihvdlnKFzgYBNS2jKALNXbE5IE5RLRS9pw?e=2veUI4", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Biol%C3%B3gica%20Limoncocha.png"},
    {id: 42, nombre: "Reserva Biol贸gica El C贸ndor", tipo: "Reserva Biol贸gica", region: "Amazon铆a", latitud: -3.4375542, longitud: -78.2074508, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Biol%C3%B3gica%20El%20C%C3%B3ndor.png"},
    {id: 43, nombre: "Reserva Biol贸gica El Quimi", tipo: "Reserva Biol贸gica", region: "Amazon铆a", latitud: -3.4385812, longitud: -78.4093123, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Biol%C3%B3gica%20El%20Quimi.png"},
    {id: 44, nombre: "Refugio de Vida Silvestre El Zarza", tipo: "Refugio de Vida Silvestre", region: "Amazon铆a", latitud: -3.8235978, longitud: -78.7569332, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/rjaramillo_fias_org_ec/Eb89RBL5KEZDjs3QyKtdsdMBAmeX-5kAsqzE6O0bJXzi3w?e=6bZ0Ja", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Refugio%20de%20Vida%20Silvestre%20El%20Zarza.png"},
    {id: 45, nombre: "Reserva Biol贸gica Cerro Plateado", tipo: "Reserva Biol贸gica", region: "Amazon铆a", latitud: -4.6041852, longitud: -78.7368989, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/rjaramillo_fias_org_ec/EUAktThMH6tOhQCHfuA43YgB8z-_yc-9sZEXSXNNsi_AKA?e=mX4eUj", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Biol%C3%B3gica%20Cerro%20Plateado.png"},
    {id: 46, nombre: "rea Ecol贸gica de Conservaci贸n Municipal Siete Iglesias", tipo: "rea Ecol贸gica de Conservaci贸n", region: "Amazon铆a", latitud: -3.101546, longitud: -78.6120758, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/%C3%81rea%20Ecol%C3%B3gica%20de%20Conservaci%C3%B3n%20Municipal%20Siete%20Iglesias.png"},
    {id: 47, nombre: "rea Ecol贸gico de Conservaci贸n Municipal Taita Imbabura", tipo: "rea Ecol贸gica de Conservaci贸n", region: "Sierra", latitud: 0.2734667, longitud: -78.1290715, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.png"}, // URL_AQUI corregida
    {id: 48, nombre: "rea Ecol贸gica de Conservaci贸n Municipal La Bonita Cofanes/Chingual", tipo: "rea Ecol贸gica de Conservaci贸n", region: "Amazon铆a", latitud: 0.4734698, longitud: -77.5442678, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/ntacure_fias_org_ec/EfA1Iy38mT1DmiT0wzce0UABLeW-JczYfZ0AknaV2-Nzeg?e=yCqE7d", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"}, // URL_AQUI corregida
    {id: 49, nombre: "rea nacional de recreaci贸n Parque Samanes", tipo: "rea Nacional de Recreaci贸n", region: "Costa", latitud: -2.1035904, longitud: -79.896413, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/%C3%81rea%20nacional%20de%20recreaci%C3%B3n%20Parque%20Samanes.png"},
    {id: 50, nombre: "Reserva Geobot谩nica Pululahua", tipo: "Reserva Geobot谩nica", region: "Sierra", latitud: 0.038, longitud: -78.463, link: "https://fiasec-my.sharepoint.com/:x:/g/personal/cjarrin_fias_org_ec/ETMZQJwANg9JtYBZyygtQkYBhTt_fuBK3ZxlUuzhBgbVwA?e=HsQEQaI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Reserva%20Geobot%C3%A1nica%20Pululahua.png"},
    {id: 51, nombre: "Cordillera Oriental del Carchi", tipo: "rea Ecol贸gica de Conservaci贸n", region: "Sierra", latitud: 0.5335199, longitud: -77.8011826, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"}, // URL_AQUI corregida
    {id: 52, nombre: "Reserva Marina Gal谩pagos", tipo: "Reserva Marina", region: "Insular", latitud: -0.8061698, longitud: -90.5477817, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/refs/heads/Img_Map/Parque%20nacional%20Galapagos.png"}, // URL_AQUI corregida
    {id: 53, nombre: "rea Protegida Privada Ichubamba Yasepan", tipo: "rea Protegida Privada", region: "Sierra", latitud: -2.0855835, longitud: -78.4940793, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"}, // URL_AQUI corregida
    {id: 54, nombre: "Bosque La Perla", tipo: "Bosque Protector", region: "Costa", latitud: -0.1564607, longitud: -79.2828232, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"}, // URL_AQUI corregida
    {id: 55, nombre: "rea Ecolog铆ca de Conservaci贸n Municipal Curiquingue Gallocantana", tipo: "rea Ecol贸gica de Conservaci贸n", region: "Sierra", latitud: -2.7574528, longitud: -79.1834216, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"}, // URL_AQUI corregida
    {id: 56, nombre: "Refugio de vida silvestre Mach谩ngara Tomebamba", tipo: "Refugio de Vida Silvestre", region: "Sierra", latitud: -2.7331373, longitud: -79.0614996, link: "URL_AQUI", logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/mae.jpg"} // URL_AQUI corregida
];

          
            
            const fiasAreasNames = [
                "Reserva Ecol贸gica El ngel", "Parque Nacional Sangay", "Reserva de Producci贸n de Fauna Chimborazo", 
                "Parque Nacional Cotopaxi", "Area Nacional de Recreaci贸n El Boliche", "Reserva Ecol贸gica Los Illinizas", 
                "Reserva Ecol贸gica Cotacachi-Cayapas", "Parque Nacional Podocarpus", "Refugio de Vida Silvestre El Zarza", 
                "Parque Nacional de Yacuri", "Reserva Biol贸gica Cerro Plateado", "Parque Nacional Cayambe-Coca", 
                "Reserva Geobot谩nica Pululahua", "Refugio de Vida Silvestre Pasochoa", "Parque Nacional Llanganates", 
                "Reserva Biol贸gica Colonso Chalupas", "Reserva Marina El Pelado", "Reserva Puntilla De Santa Elena", 
                "Parque Nacional Machalilla", "Refugio de Vida Silvestre Marino Costera Pacoche", 
                "Refugio de Vida Silvestre Isla Coraz贸n y Fragata", "Reserva Ecol贸gica Manglares Churute", 
                "Parque Lago de Chong贸n", "Reserva de Producci贸n de Fauna Manglares El Salado", 
                "rea Nacional de Recreaci贸n Isla Santay", "Refugio de Vida Silvestre Manglares el Morro", 
                "rea Nacional De Recreaci贸n Playas Villamil", "Reserva Ecol贸gica Manglares Cayapas Mataje", 
                "Refugio de Vida Silvestre La Chiquita", "Reserva Ecol贸gica Mache-Chindul", 
                "Refugio de Vida Silvestre Manglares Estuario R铆o Esmeraldas", "Refugio de Vida Silvestre El Pambilar", 
                "Reserva Marina Galera San Francisco", "Reserva Marina Isla Santa Clara", 
                "Reserva Ecol贸gica de Arenillas", "Reserva Ecol贸gica Antisana", "Parque Nacional Sumaco Napo-Galeras", 
                "Parque Nacional Yasun铆", "Reserva Biol贸gica Limoncocha", "Reserva de Producci贸n Faun铆stica Cuyabeno", 
                "Reserva Ecol贸gica Cof谩n-Bermejo"
            ];

            areasProtegidas.forEach(area => {
                area.tieneBienesFIAS = fiasAreasNames.includes(area.nombre);
            });
                
            // reas administrativas con sus Logos (apuntando al repo raw)
            const areasAdministrativas = [
                {
                    id: 100, nombre: "FIAS Institucional", tipo: "rea Administrativa", subtipo: "FIAS", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://fiasec-my.sharepoint.com/:x:/g/personal/jcruzg_fias_org_ec/ET7cHBq4_bBBhZHTCjfVxdIBGImPaOuGN7m4RpZm5Egrag",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/FIAS.png"
                },
                {
                    id: 101, nombre: "REM (REDD Early Movers)", tipo: "rea Administrativa", subtipo: "REM", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/REM",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/REM.png"
                },
                {
                    id: 102, nombre: "FAP (Fondo de reas Protegidas)", tipo: "rea Administrativa", subtipo: "FAP", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/FAP",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/FAP.jpg"
                },
                {
                    id: 103, nombre: "Bioeconom铆a", tipo: "rea Administrativa", subtipo: "Bioeconom铆a", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/Bioeconomia",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Bioeconom%C3%ADa.png"
                },
                {
                    id: 104, nombre: "PASF (Proyecto Amazonia Sin Fuego)", tipo: "rea Administrativa", subtipo: "PASF", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/PASF",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/PASF.png"
                },
                {
                    id: 105, nombre: "Conserva Aves", tipo: "rea Administrativa", subtipo: "Conserva Aves", region: "Sierra", latitud: -0.2149, longitud: -78.5009,
                    direccion: "Edificio Concorde, Av. 12 de Octubre y Francisco Salazar", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/ConservaAves",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/Conserva%20Aves.png"
                },
                {
                    id: 106, nombre: "FEIG (Fondo para Control de Especies Invasoras de Gal谩pagos)", tipo: "rea Administrativa", subtipo: "FEIG", region: "Insular", latitud: -0.7456, longitud: -90.3018, 
                    direccion: "Marchena 115 y Charles Darwin, Puerto Ayora", esAdministrativa: true,
                    link: "https://sharepoint.fias.org.ec/inventario/FEIG",
                    logoUrl: "https://raw.githubusercontent.com/jaircruz1304/FIAS/Img_Map/FEIG.png"
                }
            ];
            
            areasAdministrativas.forEach(area => area.tieneBienesFIAS = true);

            const todasLasAreas = [...areasProtegidas, ...areasAdministrativas];
            
            let map;
            let markersLayer;
            let areaData = [];
            let activeFilters = {
                types: [],
                regions: [],
                adminTypes: [],
                search: '',
                fiasOnly: false
            };
            
            function init() {
                createAppData();
                initMap();
                createFilterOptions();
                updateMapAndList();
                initEventListeners();
                
                setTimeout(() => {
                    document.getElementById('loading-overlay').style.display = 'none';
                }, 1500);
            }
            
            function createAppData() {
                areaData = todasLasAreas.map(area => {
                    
                    // --- CREACIN DEL MARCADOR CON IMAGEN ---
                    // Se usa onerror para cargar la imagen default si falla la carga
                    const imageHtml = `<img src="${area.logoUrl}" class="custom-map-img ${area.tieneBienesFIAS ? 'fias-marker-pulse' : ''}" onerror="this.onerror=null;this.src='${defaultImage}';">`;

                    const customIcon = L.divIcon({ 
                        html: imageHtml, 
                        className: '', // Vac铆o para no interferir con los estilos de la imagen
                        iconSize: [40, 40], 
                        iconAnchor: [20, 20], 
                        popupAnchor: [0, -20] 
                    });
                    
                    const marker = L.marker([area.latitud, area.longitud], { icon: customIcon });
                    
                    let popupContent = `<h5><img src="${area.logoUrl}" style="width:25px; height:25px; object-fit:contain; margin-right:5px; border-radius:50%;" onerror="this.src='${defaultImage}'"> ${area.nombre}</h5>`;
                    popupContent += `<p class="mb-0"><strong>Tipo:</strong> ${area.tipo}<br><strong>Regi贸n:</strong> ${area.region}</p>`;
                    if (area.direccion) popupContent += `<p class="mb-0"><strong>Direcci贸n:</strong> ${area.direccion}</p>`;
                    if (area.tieneBienesFIAS) popupContent += `<p class="text-primary fw-bold mb-0 mt-2"><i class="fas fa-gem me-1"></i> Contiene bienes institucionales</p>`;
                    
                    let inventoryButtonHtml = '';
                    if (area.tieneBienesFIAS) {
                        if (area.link && area.link !== 'URL_AQUI') {
                            inventoryButtonHtml = `
                            <button class="btn btn-sm btn-outline-success" onclick="viewInventory(${area.id})">
                                <i class="fas fa-boxes-stacked me-1"></i>Inventario
                            </button>`;
                        } else {
                            inventoryButtonHtml = `
                            <button class="btn btn-sm btn-outline-secondary" disabled title="Inventario no disponible">
                                <i class="fas fa-boxes-stacked me-1"></i>Inventario (N/D)
                            </button>`;
                        }
                    }

                    popupContent += `<div class="mt-2 text-center">
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="viewDetails(${area.id})">
                            <i class="fas fa-info-circle me-1"></i>Detalles
                        </button>
                        ${inventoryButtonHtml}
                    </div>`;
                    
                    marker.bindPopup(popupContent);
                    marker.on('click', () => {
                        highlightCard(area.id);
                        const cardElement = document.querySelector(`.area-card[data-id='${area.id}']`);
                        if (cardElement) {
                            cardElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    });
                    
                    return { ...area, marker };
                });
            }
            
            function initMap() {
                map = L.map('map').setView([-1.8312, -78.1834], 7);
                const baseLayers = {
                    "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap' }),
                    "Sat茅lite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { attribution: 'Tiles &copy; Esri' }),
                    "Topogr谩fico": L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', { attribution: 'Map data: &copy; OpenTopoMap' }),
                    "CartoDB Positron": L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; CartoDB' }),
                    "CartoDB Dark Matter": L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; CartoDB' })
                };
                baseLayers.OpenStreetMap.addTo(map);
                L.control.layers(baseLayers).addTo(map);
                markersLayer = L.markerClusterGroup();
                map.addLayer(markersLayer);

                const legend = L.control({position: 'bottomright'});
                legend.onAdd = function(map) {
                    const div = L.DomUtil.create('div', 'legend');
                    div.innerHTML = `
                        <h4><i class="fas fa-gem text-primary"></i> Con bienes institucionales</h4>
                      <div class="creditos-container mt-2 pt-2 border-top">
    <small class="text-muted d-flex align-items-center">
        Desarrollado por: 
        <a href="https://www.linkedin.com/in/jair-cruz-gallegos-65998776/" 
           target="_blank" 
           class="d-inline-flex align-items-center ms-1 text-decoration-none"
           data-bs-toggle="tooltip" 
           title="LinkedIn de Jair Cruz Gallegos">
            Jair Cruz
            <i class="fab fa-linkedin ms-1 fs-6"></i>
        </a>
    </small>
</div>
                    `;
                    return div;
                };
                legend.addTo(map);
            }
            
            function createFilterOptions() {
                const types = [...new Set(areasProtegidas.map(a => a.tipo))].sort();
                const typeOptions = document.getElementById('type-options');
                types.forEach(type => {
                    const areaSample = areasProtegidas.find(a => a.tipo === type);
                    // Pasamos la URL de la imagen al filtro
                    typeOptions.appendChild(createFilterOption(type, areasProtegidas.filter(a => a.tipo === type).length, 'type', areaSample.logoUrl));
                });

                const regions = [...new Set(todasLasAreas.map(a => a.region))].sort();
                const regionOptions = document.getElementById('region-options');
                regions.forEach(region => regionOptions.appendChild(createFilterOption(region, todasLasAreas.filter(a => a.region === region).length, 'region', null)));

                const adminTypes = [...new Set(areasAdministrativas.map(a => a.subtipo))].sort();
                const adminOptions = document.getElementById('admin-options');
                adminTypes.forEach(subtipo => {
                    const areaSample = areasAdministrativas.find(a => a.subtipo === subtipo);
                    adminOptions.appendChild(createFilterOption(subtipo, areasAdministrativas.filter(a => a.subtipo === subtipo).length, 'adminType', areaSample.logoUrl));
                });
            }
            
            function createFilterOption(value, count, type, logoUrl) {
                const option = document.createElement('div');
                option.className = 'filter-option';
                const id = `${type}-${value.replace(/\s+/g, '-').toLowerCase()}`;
                
                // Imagen en el filtro (con fallback de ocultar si falla)
                const logoHtml = logoUrl ? `<img src="${logoUrl}" alt="Logo" loading="lazy" onerror="this.style.display='none'">` : '<i class="fas fa-map-marker-alt text-muted" style="width:24px; text-align:center;"></i>';

                option.innerHTML = `
                    <input type="checkbox" id="${id}" data-filter-type="${type}" data-value="${value}">
                    <label for="${id}">
                        <span class="logo-container">
                            ${logoHtml}
                            <span>${value}</span>
                        </span>
                        <span class="count">${count}</span>
                    </label>`;
                
                option.querySelector('input').addEventListener('change', function() {
                    const { filterType, value } = this.dataset;
                    let targetArray;
                    if (filterType === 'type') targetArray = activeFilters.types;
                    else if (filterType === 'region') targetArray = activeFilters.regions;
                    else targetArray = activeFilters.adminTypes;

                    if (this.checked) {
                        if (!targetArray.includes(value)) targetArray.push(value);
                    } else {
                        const index = targetArray.indexOf(value);
                        if (index > -1) targetArray.splice(index, 1);
                    }
                    updateSelectedCounts();
                    updateMapAndList();
                });
                return option;
            }

            function updateSelectedCounts() {
                document.getElementById('selected-types-count').textContent = activeFilters.types.length;
                document.getElementById('selected-regions-count').textContent = activeFilters.regions.length;
                document.getElementById('selected-admin-count').textContent = activeFilters.adminTypes.length;
            }
            
            function updateMapAndList() {
                markersLayer.clearLayers();
                const areasCards = document.getElementById('areas-cards');
                areasCards.innerHTML = '';
                
                const search = document.getElementById('search-input').value.toLowerCase();
                const fiasOnly = document.getElementById('fias-filter').checked;
                
                activeFilters.search = search;
                activeFilters.fiasOnly = fiasOnly;
                
                const filteredAreas = areaData.filter(area => {
                    const searchMatch = area.nombre.toLowerCase().includes(search);
                    const regionMatch = activeFilters.regions.length === 0 || activeFilters.regions.includes(area.region);
                    const fiasMatch = !fiasOnly || area.tieneBienesFIAS;

                    if (!searchMatch || !regionMatch || !fiasMatch) return false;
                    
                    const typesActive = activeFilters.types.length > 0;
                    const adminTypesActive = activeFilters.adminTypes.length > 0;

                    if (!typesActive && !adminTypesActive) {
                        return true;
                    }
                    
                    let typeMatch = false;
                    let adminMatch = false;

                    if (area.esAdministrativa) {
                        if (adminTypesActive) {
                            adminMatch = activeFilters.adminTypes.includes(area.subtipo);
                        }
                    } else {
                        if (typesActive) {
                            typeMatch = activeFilters.types.includes(area.tipo);
                        }
                    }
                    
                    return typeMatch || adminMatch;
                });
                
                filteredAreas.forEach(area => {
                    markersLayer.addLayer(area.marker);
                    const card = document.createElement('div');
                    card.className = `area-card ${area.esAdministrativa ? 'admin-card' : ''}`;
                    card.dataset.id = area.id;
                    
                    const fiasBadge = area.tieneBienesFIAS ? '<span class="badge fias-badge ms-2"><i class="fas fa-gem me-1"></i>FIAS</span>' : '';
                    
                    let inventoryButtonHtml = '';
                    if (area.tieneBienesFIAS) {
                        if (area.link && area.link !== 'URL_AQUI') {
                            inventoryButtonHtml = `<button class="btn btn-sm btn-outline-success" onclick="viewInventory(${area.id})" data-bs-toggle="tooltip" title="Abrir inventario"><i class="fas fa-boxes-stacked"></i></button>`;
                        } else {
                            inventoryButtonHtml = `<button class="btn btn-sm btn-outline-secondary" disabled data-bs-toggle="tooltip" title="Inventario no disponible"><i class="fas fa-boxes-stacked"></i></button>`;
                        }
                    }

                    // --- TARJETA LATERAL CON IMAGEN ---
                    card.innerHTML = `
                        <div class="area-card-header">
                            <div class="d-flex align-items-center">
                                 <img src="${area.logoUrl}" class="area-card-img" onerror="this.onerror=null;this.src='${defaultImage}';">
                                 <div><strong>${area.nombre}</strong>${fiasBadge}</div>
                            </div>
                        </div>
                        <div class="area-card-body">
                            <div class="d-flex justify-content-between">
                                <span class="badge bg-light text-dark">${area.tipo}</span>
                                <span class="badge bg-light text-dark">${area.region}</span>
                            </div>
                            ${area.direccion ? `<p class="mt-2 mb-0 small text-muted"><i class="fas fa-map-marker-alt me-1"></i>${area.direccion}</p>` : ''}
                            <div class="mt-2">
                                <button class="btn btn-sm btn-outline-primary me-2" onclick="viewDetails(${area.id})" data-bs-toggle="tooltip" title="Ver detalles"><i class="fas fa-info-circle"></i></button>
                                ${inventoryButtonHtml}
                            </div>
                        </div>`;
                    
                    card.addEventListener('click', () => {
                        highlightCard(area.id);
                        area.marker.openPopup();
                        map.setView([area.latitud, area.longitud], 10);
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    });
                    areasCards.appendChild(card);
                });
                
                if (filteredAreas.length > 0) {
                    const featureGroup = L.featureGroup(filteredAreas.map(a => a.marker));
                    map.fitBounds(featureGroup.getBounds().pad(0.1), { maxZoom: 15 });
                } else {
                    map.setView([-1.8312, -78.1834], 7);
                }

                document.getElementById('visible-count').textContent = filteredAreas.length;
                document.getElementById('total-count').textContent = areaData.length;
                document.getElementById('areas-count').textContent = `${filteredAreas.length}/${areaData.length}`;
                
                updateFilterCheckboxes();
                initializeTooltips();
            }
            
            function updateFilterCheckboxes() {
                document.querySelectorAll('.filter-option input').forEach(checkbox => {
                    const { filterType, value } = checkbox.dataset;
                    let isChecked = false;
                    if (filterType === 'type') isChecked = activeFilters.types.includes(value);
                    else if (filterType === 'region') isChecked = activeFilters.regions.includes(value);
                    else if (filterType === 'adminType') isChecked = activeFilters.adminTypes.includes(value);
                    checkbox.checked = isChecked;
                });
                updateSelectedCounts();
            }
            
            function highlightCard(id) {
                document.querySelectorAll('.area-card').forEach(card => card.classList.remove('active'));
                const selectedCard = document.querySelector(`.area-card[data-id='${id}']`);
                if (selectedCard) selectedCard.classList.add('active');
            }
            
            function resetFilters() {
                activeFilters = { types: [], regions: [], adminTypes: [], search: '', fiasOnly: false };
                document.getElementById('search-input').value = '';
                document.getElementById('fias-filter').checked = false;
                updateMapAndList();
                Swal.fire({ title: 'Filtros reiniciados', icon: 'success', confirmButtonText: 'Aceptar', confirmButtonColor: 'var(--primary-color)' });
            }
            
            function initEventListeners() {
                document.getElementById('search-input').addEventListener('input', updateMapAndList);
                document.getElementById('fias-filter').addEventListener('change', updateMapAndList);
                document.getElementById('reset-filters').addEventListener('click', resetFilters);
                document.getElementById('scroll-to-top').addEventListener('click', () => document.querySelector('.sidebar-content').scrollTo({ top: 0, behavior: 'smooth' }));
                
                const setupFilterActions = (type, sourceArray) => {
                    const plural = type === 'type' ? 'types' : 'regions';
                    document.getElementById(`select-all-${plural}`).addEventListener('click', () => {
                         activeFilters[plural] = [...new Set(sourceArray.map(a => a[type]))];
                        updateMapAndList();
                    });
                    document.getElementById(`clear-all-${plural}`).addEventListener('click', () => {
                        activeFilters[plural] = [];
                        updateMapAndList();
                    });
                };
                setupFilterActions('type', areasProtegidas);
                setupFilterActions('region', todasLasAreas);

                document.getElementById('select-all-admin').addEventListener('click', () => {
                    activeFilters.adminTypes = [...new Set(areasAdministrativas.map(a => a.subtipo))];
                    updateMapAndList();
                });
                document.getElementById('clear-all-admin').addEventListener('click', () => {
                    activeFilters.adminTypes = [];
                    updateMapAndList();
                });
                
                document.getElementById('toggle-sidebar-btn').addEventListener('click', function() {
                    document.getElementById('sidebar').classList.toggle('collapsed');
                    this.querySelector('i').classList.toggle('fa-bars');
                    this.querySelector('i').classList.toggle('fa-chevron-right');
                    setTimeout(() => map.invalidateSize(), 300);
                });
            }

            window.viewInventory = function(id) {
                const area = areaData.find(a => a.id === id);
                if (area && area.tieneBienesFIAS) {
                    if (area.link && area.link !== 'URL_AQUI') {
                        Swal.fire({
                            title: `Inventario de ${area.nombre}`,
                            html: `Ser谩 redirigido al inventario de bienes institucionales. 驴Desea continuar?`,
                            icon: 'info',
                            showCancelButton: true,
                            confirmButtonText: '<i class="fas fa-external-link-alt me-1"></i> Abrir enlace',
                            cancelButtonText: 'Cancelar',
                            confirmButtonColor: 'var(--primary-color)'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.open(area.link, '_blank');
                            }
                        });
                    } else {
                        Swal.fire({
                            title: 'Inventario FIAS',
                            html: `El enlace al inventario para <strong>${area.nombre}</strong> a煤n no ha sido configurado.`,
                            icon: 'warning',
                            confirmButtonText: 'Entendido',
                            confirmButtonColor: 'var(--primary-color)'
                        });
                    }
                }
            };

            window.viewDetails = function(id) {
                const area = areaData.find(a => a.id === id);
                if (area) {
                    let content = `<div class="text-start">
                        <div class="text-center mb-3">
                            <img src="${area.logoUrl}" style="width:100px; height:100px; object-fit:contain; border-radius:50%; border:1px solid #ddd;" onerror="this.src='${defaultImage}'">
                        </div>
                        <strong>Tipo:</strong> ${area.tipo}<br>
                        <strong>Regi贸n:</strong> ${area.region}<br>
                        <strong>Coordenadas:</strong> ${area.latitud.toFixed(4)}, ${area.longitud.toFixed(4)}`;
                    if (area.direccion) content += `<br><strong>Direcci贸n:</strong> ${area.direccion}`;
                    if (area.tieneBienesFIAS) content += `<br><br><span class="text-primary"><i class="fas fa-gem me-1"></i> Contiene bienes institucionales.</span>`;
                    content += `</div>`;
                    
                    Swal.fire({
                        title: area.nombre,
                        html: content,
                        icon: null,
                        confirmButtonText: 'Cerrar',
                        confirmButtonColor: 'var(--primary-color)'
                    });
                }
            };
            
            function initializeTooltips() {
                const oldTooltips = document.querySelectorAll('.tooltip');
                oldTooltips.forEach(t => t.remove());
                const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return new bootstrap.Tooltip(tooltipTriggerEl);
                });
            }

            init();
            initializeTooltips();
        });
    </script>
</body>
</html>
